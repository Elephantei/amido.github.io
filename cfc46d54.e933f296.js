(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{139:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return l})),a.d(t,"default",(function(){return i}));var o=a(2),r=a(6),n=(a(0),a(170)),s={id:"setting_up_cosmos_db_locally_cqrs",title:"Cosmos DB Emulator",sidebar_label:"Cosmos DB Emulator",hide_table_of_contents:!0},c={unversionedId:"workloads/azure/backend/java_cqrs/setting_up_cosmos_db_locally_cqrs",id:"workloads/azure/backend/java_cqrs/setting_up_cosmos_db_locally_cqrs",isDocsHomePage:!1,title:"Cosmos DB Emulator",description:"Set up Cosmos DB Emulator locally",source:"@site/docs/workloads/azure/backend/java_cqrs/setting_up_cosmos_db_locally_cqrs.md",slug:"/workloads/azure/backend/java_cqrs/setting_up_cosmos_db_locally_cqrs",permalink:"/stacks/docs/workloads/azure/backend/java_cqrs/setting_up_cosmos_db_locally_cqrs",version:"current",sidebar_label:"Cosmos DB Emulator",sidebar:"docs",previous:{title:"IDE guidelines for the Java Rest API",permalink:"/stacks/docs/workloads/azure/backend/java_cqrs/ide_java_cqrs"},next:{title:"Java Rest API Architecture",permalink:"/stacks/docs/workloads/azure/backend/java_cqrs/architecture_java_cqrs"}},l=[{value:"Set up Cosmos DB Emulator locally",id:"set-up-cosmos-db-emulator-locally",children:[{value:"Using the Cosmos DB Emulator to run the database locally",id:"using-the-cosmos-db-emulator-to-run-the-database-locally",children:[]},{value:"Create the Cosmos DB structure",id:"create-the-cosmos-db-structure",children:[]}]}],u={rightToc:l};function i(e){var t=e.components,s=Object(r.a)(e,["components"]);return Object(n.b)("wrapper",Object(o.a)({},u,s,{components:t,mdxType:"MDXLayout"}),Object(n.b)("h2",{id:"set-up-cosmos-db-emulator-locally"},"Set up Cosmos DB Emulator locally"),Object(n.b)("p",null,"The Azure Cosmos emulator provides a local environment that emulates the Azure Cosmos DB\nservice for development purposes. Using the Azure Cosmos emulator, you can develop and test\nyour application locally, without creating an Azure subscription or incurring any costs.\nLatest instruction can be found in the ",Object(n.b)("a",Object(o.a)({parentName:"p"},{href:"https://docs.microsoft.com/en-us/azure/cosmos-db/local-emulator?tabs=cli%2Cssl-netstd21"}),"Microsoft page")),Object(n.b)("h3",{id:"using-the-cosmos-db-emulator-to-run-the-database-locally"},"Using the Cosmos DB Emulator to run the database locally"),Object(n.b)("p",null,"1) Download and install the latest version of CosmosDB Emulator. Once it's installed it will be\navailable on"),Object(n.b)("pre",null,Object(n.b)("code",Object(o.a)({parentName:"pre"},{className:"language-text"}),"https://localhost:8081/_explorer/index.html\n")),Object(n.b)("p",null,"   You can also find the Emulator from Start Menu and type Azure Cosmos DB Emulator.\nThe value for ",Object(n.b)("strong",{parentName:"p"},"COSMOSDB_KEY")," can be found within the emulator. See Primary Key:"),Object(n.b)("p",null,"   ",Object(n.b)("img",{alt:"CosmosDB",src:a(183).default}),"\nSet the cosmosdb URI, databaseName and key in application.yml file using the value above"),Object(n.b)("pre",null,Object(n.b)("code",Object(o.a)({parentName:"pre"},{className:"language-code"}),"azure:\n  cosmosdb:\n    uri: xxxxxx\n    database: xxxxxx\n    key: xxxxxx\n")),Object(n.b)("br",null),Object(n.b)("h3",{id:"create-the-cosmos-db-structure"},"Create the Cosmos DB structure"),Object(n.b)("p",null,"  Based on the template the Cosmos DB has to contain a fixed structure."),Object(n.b)("p",null,"  Create a collection ",Object(n.b)("strong",{parentName:"p"},"Stacks")," with a container id ",Object(n.b)("strong",{parentName:"p"},"menu")," and the partition key ",Object(n.b)("strong",{parentName:"p"},"/id"),"."),Object(n.b)("p",null,"  Create a database called Stacks for the application, and a database called CosmosDBPackage for the\nintegration tests of the CosmosDB package"),Object(n.b)("p",null,"  ",Object(n.b)("img",{alt:"CosmosDB",src:a(184).default})),Object(n.b)("br",null),Object(n.b)("p",null,"  The Stacks database should have a container called Menu partitioned by ",Object(n.b)("inlineCode",{parentName:"p"},"/id"),"."),Object(n.b)("p",null,"  ",Object(n.b)("img",{alt:"CosmosDB",src:a(194).default})))}i.isMDXComponent=!0},170:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return m}));var o=a(0),r=a.n(o);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,o,r=function(e,t){if(null==e)return{};var a,o,r={},n=Object.keys(e);for(o=0;o<n.length;o++)a=n[o],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)a=n[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var u=r.a.createContext({}),i=function(e){var t=r.a.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},b=function(e){var t=i(e.components);return r.a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},p=r.a.forwardRef((function(e,t){var a=e.components,o=e.mdxType,n=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),b=i(a),p=o,m=b["".concat(s,".").concat(p)]||b[p]||d[p]||n;return a?r.a.createElement(m,c(c({ref:t},u),{},{components:a})):r.a.createElement(m,c({ref:t},u))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=a.length,s=new Array(n);s[0]=p;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,s[1]=c;for(var u=2;u<n;u++)s[u]=a[u];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,a)}p.displayName="MDXCreateElement"},183:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/cosmosdb_emulator_3-ddb539bc14733fdf2bc3cb8dc022cf09.png"},184:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/cosmosdb_emulator_1-eb5c6355a0662db45234724a920edac3.png"},194:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/cosmosdb_emulator_2-ea8bcc2395126bc2cb4826568d1b256d.png"}}]);