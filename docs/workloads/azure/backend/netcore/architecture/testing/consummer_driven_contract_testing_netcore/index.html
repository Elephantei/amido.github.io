<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EKCQBC5CSJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EKCQBC5CSJ",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Amido Stacks " href="/opensearch.xml"><title data-react-helmet="true">Consumer Driven Contract Testing | Amido Stacks </title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Consumer Driven Contract Testing | Amido Stacks "><meta data-react-helmet="true" name="description" content="Contract testing for the .NET Core REST API application"><meta data-react-helmet="true" property="og:description" content="Contract testing for the .NET Core REST API application"><meta data-react-helmet="true" name="keywords" content=".net core,rest api,tests,stacks,contract tests,pact,consumer,provider,broker"><meta data-react-helmet="true" property="og:url" content="https://stacks.amido.com/docs/workloads/azure/backend/netcore/architecture/testing/consummer_driven_contract_testing_netcore"><link data-react-helmet="true" rel="shortcut icon" href="/img/thumbnail_stacks.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://stacks.amido.com/docs/workloads/azure/backend/netcore/architecture/testing/consummer_driven_contract_testing_netcore"><link rel="stylesheet" href="/styles.121582fa.css">
<link rel="preload" href="/styles.400e2041.js" as="script">
<link rel="preload" href="/runtime~main.5009367c.js" as="script">
<link rel="preload" href="/main.c1eefd70.js" as="script">
<link rel="preload" href="/2.f50c9771.js" as="script">
<link rel="preload" href="/3.68530fb9.js" as="script">
<link rel="preload" href="/4.7481968f.js" as="script">
<link rel="preload" href="/1be78505.dc143ff8.js" as="script">
<link rel="preload" href="/935f2afb.48727725.js" as="script">
<link rel="preload" href="/17896441.40ecf0bc.js" as="script">
<link rel="preload" href="/f07767a5.58a66b31.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_wide.svg" alt="Amido Stacks Logo"><strong class="navbar__title"></strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_wide.svg" alt="Amido Stacks Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="consumer-driven-contract-testing"></a>Consumer Driven Contract Testing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#consumer-driven-contract-testing" title="Direct link to heading">#</a></h2><p>Consumer Driven Contract (CDC) Testing is a pattern that allows a consumer (i.e: a client) and a provider (i.e. an API provider) to communicate using an agreed contract (a pact)
It&#x27;s mostly beneficial in scenarios where there&#x27;s many consumers that need to talk with one service provider, although it can be useful even with one consumer and one provider only.
For our .NET Core stacks, we are using pact.net library.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-pact-works"></a>How Pact works<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-pact-works" title="Direct link to heading">#</a></h3><p>Having well-formed contract tests makes it easy for developers to avoid version hell. Contract testing is ideal for developing and deploying microservices.
Consumer driven means the contract is written as part of the consumer tests.
A major advantage of this pattern is that only parts of the communication that are actually used by the consumer(s) get tested. This in turn means that any provider behaviour not used by current consumers is free to change without breaking tests.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="consumer-testing"></a>Consumer testing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#consumer-testing" title="Direct link to heading">#</a></h3><p>Each test built by the consumer is an interaction that is recorded by the pact mock provider in a pact file (in json format)
The consumer does not communicate with the real service at the time of the tests execution.
The tests describe what expects from the provider and nothing else that the provide may expose.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="provider-testing"></a>Provider testing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#provider-testing" title="Direct link to heading">#</a></h3><p>Regarding provider testing, the provider mock verifier will load the interactions shared by the consumers and submits these to the actual provider and the actual response it generates is compared with the minimal expected response, as described in the interaction.
If the generated response is valid, then the provider tests pass.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pact-broker"></a>Pact Broker<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pact-broker" title="Direct link to heading">#</a></h3><p>When sharing pact files, it&#x27;s better to use a pact broker that can also integrate with the CI/CD tooling in order to verify the test results and allow both consumer&#x27;s and provider&#x27;s pipelines to verify the results and decide when to merge the changes and deploy them.</p><p><img alt="PACT Testing" src="/assets/images/pact_testing-7326969b4745759814856bb866c5acba.png"></p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#consumer-driven-contract-testing" class="table-of-contents__link">Consumer Driven Contract Testing</a><ul><li><a href="#how-pact-works" class="table-of-contents__link">How Pact works</a></li><li><a href="#consumer-testing" class="table-of-contents__link">Consumer testing</a></li><li><a href="#provider-testing" class="table-of-contents__link">Provider testing</a></li><li><a href="#pact-broker" class="table-of-contents__link">Pact Broker</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">About Us</h4><ul class="footer__items"><li class="footer__item"><a href="https://amido.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Amido</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Open Source</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Amido Ltd</div></div></div></footer></div>
<script src="/styles.400e2041.js"></script>
<script src="/runtime~main.5009367c.js"></script>
<script src="/main.c1eefd70.js"></script>
<script src="/2.f50c9771.js"></script>
<script src="/3.68530fb9.js"></script>
<script src="/4.7481968f.js"></script>
<script src="/1be78505.dc143ff8.js"></script>
<script src="/935f2afb.48727725.js"></script>
<script src="/17896441.40ecf0bc.js"></script>
<script src="/f07767a5.58a66b31.js"></script>
</body>
</html>